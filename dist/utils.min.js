"use strict";!function(t){function e(t){this.initBackgroundColor(t)}function a(a){var n=[].slice.call(a.querySelectorAll(".amp-dc-promo-block")),i=2,o=window.innerWidth;if(n.length<2)n[0].classList.add("dc-fade-in");else{n.forEach(function(t){n[i-1].classList.remove("dc-fade-in")}),n[i-1].classList.add("dc-fade-in");setInterval(function(){o=window.innerWidth;var t=[].slice.call(a.querySelectorAll(".dc-fade-in"));if(!(768<o)){var e=(i===n.length?i=1:i+=1,i-1);0<t.length&&t.forEach(function(t){t.classList.remove("dc-fade-in")}),n[e].classList.add("dc-fade-in")}},5e3)}}function n(t){var e={infinite:"true"===t.getAttribute("data-infinite"),navigation:"true"===t.getAttribute("data-navigation"),autoplay:"true"===t.getAttribute("data-autoplay")},a=(window.lory?window.lory:"function"==typeof require?require("lory.js").lory:null)(t,e);e.infinite||this.disableNavButtons(t,a),e.navigation&&this.navigationDots(t,a,e),this.enableSwipeGesturesOnVideo(t)}function i(t,e){[].slice.call(document.querySelectorAll(t)).forEach(function(t){t.component||(t.component=new e(t))})}var o;function r(){i(".amp-dc-banner",e),i(".amp-dc-promo-banner",a),i(".amp-dc-slider",n),new window.POI({domain:"http://i1.adis.ws",account:"csdemo",containerClass:"amp-dc-poi-image",imgClass:"amp-dc-image-pic",images:[{name:"*",polygonCallbacks:[{target:"*",action:"click",callback:function(t,e){console.log("generic click",e)},initCallback:function(t){console.log("init callback polygon",t)}}],hotspotCallbacks:[{target:"*",action:"click",callback:function(t,e){console.log("yay, i was clicked :)",e)},initCallback:function(t){console.log("init callback hotspot",t)}},{target:"*",action:"mouseover",callback:function(t,e){console.log("yay, i was hovered :)",e)},initCallback:function(t){console.log("init callback hotspot",t)}}]}]}).init()}e.prototype.initBackgroundColor=function(t){var e=t.querySelector(".amp-dc-banner-info"),a=e.getAttribute("data-color")||"rgb(255,255,255)",n=Number(e.getAttribute("data-opacity")||"1");a=(a=(a=a.slice(4)).slice(0,a.length-1)).split(",");var i=parseInt(a[0],10),o=parseInt(a[1],10),r=parseInt(a[2],10);e.style.backgroundColor="rgba("+i+", "+o+", "+r+", "+n+")"},n.prototype.disableNavButtons=function(t,a){var n=Array.prototype.slice.call(t.querySelectorAll(".js_dc_slide"),0),i=t.querySelector(".js_prev"),o=t.querySelector(".js_next"),r="ctrl-disabled",e=function(t){var e=a.returnIndex();0===e?(i.classList.add(r),o.classList.remove(r)):e===n.length-1?(i.classList.remove(r),o.classList.add(r)):(i.classList.remove(r),o.classList.remove(r))};0===a.returnIndex()&&i.classList.add(r),t.addEventListener("after.lory.slide",e),t.addEventListener("on.lory.resize",e)},n.prototype.navigationDots=function(t,a,n){var i=Array.prototype.slice.call(t.querySelectorAll(".js_dc_slider_dot"),0);i.forEach(function(t,e){0===e&&t.classList.add("active"),t.addEventListener("click",function(t){a.slideTo(e)})}),t.addEventListener("after.lory.slide",function(t){i.forEach(function(t,e){t.classList.remove("active")}),console.log(n);var e=n.infinite?t.detail.currentSlide-1:t.detail.currentSlide;i[e].classList.add("active")}),t.addEventListener("on.lory.resize",function(){i.forEach(function(t,e){0===e?t.classList.add("active"):t.classList.remove("active")})})},n.prototype.enableSwipeGesturesOnVideo=function(t){if(navigator.userAgent.match(/Android/i)){var e=t.querySelectorAll(".amp-dc-slider .amp-dc-video");(e=Array.prototype.slice.call(e,0)).forEach(function(t,e){var a=document.createElement("div");a.style.width=t.clientWidth+"px",a.style.height=t.clientHeight-30+"px",a.style.marginBottom=30-t.clientHeight+"px",a.className="inactive-video",t.parentNode.parentNode.insertBefore(a,t.parentNode),a.addEventListener("click",function(){a.classList.add("no-overlay"),t.play()}),t.addEventListener("pause",function(){a.classList.remove("no-overlay")}),window.addEventListener("resize",function(){a.style.width=t.clientWidth+"px",a.style.height=t.clientHeight-30+"px",a.style.marginBottom=30-t.clientHeight+"px"})})}},t.Utils=t.Utils||{},t.Utils.attachComponents=r,t.Utils.scrollOnHover=function(){var t,e=document.getElementById("card-container"),a=e.childNodes[0].nextSibling,n=a.clientHeight,i=e.clientHeight;i<n&&(o&&clearInterval(o),o=setInterval(function(){t=a.style.top||0,t=parseInt(t),Math.abs(parseInt(t))+i<n?(t-=1,t+="px",a.style.top=t):clearInterval(o)},1))},t.Utils.scrollLeave=function(){document.getElementById("card-container").childNodes[0].nextSibling.style.top="0px",clearInterval(o)},window.addEventListener("load",function(){r()})}(window.AmpCa=window.AmpCa||{}),function(t,e){"function"==typeof define&&define.amd?define([],e(t)):"object"==typeof exports?module.exports=e(t):t.atomic=e(t)}("undefined"!=typeof global?global:this.window||this.global,function(n){var i,t={},o=!!n.XMLHttpRequest&&!!n.JSON,r={type:"GET",url:null,data:{},callback:null,headers:{"Content-type":"application/x-www-form-urlencoded"},responseType:"text",withCredentials:!1},s=function(){for(var a={},t=0;t<arguments.length;t++){!function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&("[object Object]"===Object.prototype.toString.call(t[e])?a[e]=s(!0,a[e],t[e]):a[e]=t[e])}(arguments[t])}return a},l=function(t){if("string"==typeof t)return t;if(/application\/json/i.test(i.headers["Content-type"])||"[object Array]"===Object.prototype.toString.call(t))return JSON.stringify(t);var e=[];for(var a in t)t.hasOwnProperty(a)&&e.push(encodeURIComponent(a)+"="+encodeURIComponent(t[a]));return e.join("&")},c=function(){var e={success:function(){},error:function(){},always:function(){}},a={success:function(t){return e.success=t,a},error:function(t){return e.error=t,a},always:function(t){return e.always=t,a}},n=new XMLHttpRequest;for(var t in n.onreadystatechange=function(){if(4===n.readyState){var t=function(e){var a;if("text"!==i.responseType&&""!==i.responseType)return[e.response,e];try{a=JSON.parse(e.responseText)}catch(t){a=e.responseText}return[a,e]}(n);200<=n.status&&n.status<300?e.success.apply(e,t):e.error.apply(e,t),e.always.apply(e,t)}},n.open(i.type,i.url,!0),n.responseType=i.responseType,i.headers)i.headers.hasOwnProperty(t)&&n.setRequestHeader(t,i.headers[t]);return i.withCredentials&&(n.withCredentials=!0),n.send(l(i.data)),a};return t.ajax=function(t){if(o)return"jsonp"===(i=s(r,t||{})).type.toLowerCase()?(e=n.document.getElementsByTagName("script")[0],a=n.document.createElement("script"),i.data.callback=i.callback,a.src=i.url+(i.url.indexOf("?")+1?"&":"?")+l(i.data),e.parentNode.insertBefore(a,e),void(a.onload=function(){this.remove()})):c();var e,a},t}),window.POI=function(t){this.images=[],this.imgsLoaded=0,this.params=t,this.namedImagesData={}},window.POI.prototype={generateData:function(t){var e,a=this,n=a.getHotspots(t.data);if(null!==n){var i=a.findImg(t.img);e={dimensions:{width:t.data.width,height:t.data.height},canvas:t.canvas,layerCanvas:t.layerCanvas,changeSize:t.changeSize,layerCommand:t.layerCommand,$img:i,data:t.img,name:t.img.name,points:n,breakpoints:t.breakpoints,svg:null},a.images.push(e),a.namedImagesData[t.img.name+"?"+t.img.query]=e}a.imgsLoaded+=1,t.callback(e)},getImgData:function(C){for(var k=this,i=this.params.images,S=this.getWindowSize(),o=document.querySelectorAll("img."+this.params.imgClass),x=document.getElementsByTagName("source"),r=function(i,t){var e,a,n=[],o=!1;1<window.devicePixelRatio&&(o=!0);for(var r=x.length-1;0<=r;r--){var s,l,c,d=x[r].getAttribute("srcset"),u=x[r].parentNode.getElementsByTagName("img"),p=x[r].getAttribute("media"),m=d.split(", ");u=u.length?u[0].getAttribute("src"):"",(m=m.map(Function.prototype.call,String.prototype.trim)).forEach(function(t){t.includes("1x")?s=t:t.includes("2x")?l=t:s=t}),o&&l?d=l:s&&(d=s),e=d.split("?"),u=u.split("?"),a=e[0].split(k.params.account+"/"),u=u[0].split("/"),c=e[1]||"",a=(a=a[a.length-1].split("/"))[0],u=u[u.length-1],p=(p=p.split("and")).map(Function.prototype.call,String.prototype.trim);var f={polygonCallbacks:t.polygonCallbacks,hotspotCallbacks:t.hotspotCallbacks,name:a,query:c,parentName:u};p=p.map(function(t){var e=(t=(t=(t=(t=t.replace("(","")).replace(")","")).split(":")).map(Function.prototype.call,String.prototype.trim))[0]&&"max-width"===t[0]?"maxWidth":"minWidth",a=t[1]?parseInt(t[1].replace("px",""),10):"minWidth"===e?0:"";return f[e]=a,f}),n.push(f)}var g=[];n.forEach(function(t){var e={};if((t.name===i||t.parentName===i)&&(t.minWidth&&!t.maxWidth&&S>=t.minWidth&&(e.break=t,e.diff=S-t.minWidth,g.push(e)),t.maxWidth&&!t.minWidth&&S<=t.maxWidth&&(e.break=t,e.diff=t.maxWidth-S,g.push(e)),t.maxWidth&&null!=t.minWidth&&S<=t.maxWidth&&S>=t.minWidth)){var a=(e.break=t).maxWidth-S,n=S-t.minWidth;e.diff=a<n?a:n,g.push(e)}}),g.sort(function(t,e){return t.diff-e.diff});var h=g.length?g[0].break:null;if(h)(t=h).breakpoints=n;else{var y,v,b,w=k.findImg(t,i);if(!w)return!1;(m=(m=(d=w.getAttribute("srcset"))?d.split(", "):w.getAttribute("src").split(", ")).map(Function.prototype.call,String.prototype.trim)).forEach(function(t){t.includes("1x")?y=t:t.includes("2x")?v=t:y=t}),o&&v?d=v:y&&(d=y),b=(e=d.split("?"))[1]||"",t.query=b}t&&t.data?k.generateData({data:t.data,layerCommand:t.layerCommand,canvas:t.canvas,changeSize:t.changeSize,img:t,callback:function(t){C(t)}}):t&&k.namedImagesData[t.name+"?"+t.query]?C(k.namedImagesData[t.name+"?"+t.query]):A(t,i)},A=function(l,c){var d=l.query||"",t="*"!==l.name?l.name:c,e=t.includes("?")?"&X-Amp-Trace=true&v="+(new Date).getTime():"?"+d+"&X-Amp-Trace=true&v="+(new Date).getTime();atomic.ajax({url:k.params.domain+"/i/"+k.params.account+"/"+t+e}).success(function(t){var e=t.find(function(t){return"translate"===t.type});if(!(e&&e.data&&e.data.output&&e.data.output.layerCommand))return!1;var a,n,i=e.data.output.layerCommand.metadata,o=e.data.output.layerCommand,r=e.data.output.childlayers,s=e.data.output.layerCommand.info.canvas;(a=r.find(function(t){return t.layerCommand.metadata}))&&a.layerCommand&&(o=a.layerCommand,i=a.layerCommand.metadata,n=a.layerCommand.info.canvas),k.generateData({data:i,layerCommand:o,layerCanvas:n,canvas:s,changeSize:d.includes("crop")||l.name.includes("crop"),img:{name:c,hotspotCallbacks:l.hotspotCallbacks,polygonCallbacks:l.polygonCallbacks,query:l.query,parentName:l.parentName,breakpoints:l.breakpoints,minWidth:l.minWidth,maxWidth:l.maxWidth},breakpoints:l.breakpoints,callback:function(t){C(t)}})}).error(function(t){console.error("Image failed to load",t)})},t=i.length-1;0<=t;t--)!function(){var a=i[t];if("*"===a.name)for(var n=o.length-1;0<=n;n--)!function(){var e,t=o[n].getAttribute("src").split("?");if(e=(e=(e=t[0].split(k.params.account+"/"))[e.length-1].split("/"))[0],i.find(function(t){return t.name===e}))return;r(e,a)}();else r(a.name,a)}()},findImg:function(t,e){var a=document.querySelectorAll("img."+this.params.imgClass),n=this.params.imgAttribute||"src",i=null,o=e||t.clearName||t.name,r=new RegExp(o),s=null;"*"===o&&(r=/[\s\S]+/g);for(var l=a.length-1;0<=l;l--){var c=a[l].parentNode;if(c&&"picture"===c.tagName.toLowerCase()){for(var d=c.children,u=d.length-1;0<=u;u--)if((s=d[u].getAttribute(n)?d[u].getAttribute(n).match(r):d[u].getAttribute("srcset").match(r))&&0<s.length){i=a[l];break}}else if((s=a[l].getAttribute(n).match(r))&&0<s.length){i=a[l];break}}return i},getHotspots:function(t){var e=null;t.constructor!==Array&&(t=[t]);for(var a=t.length-1;0<=a;a--)t[a]&&t[a].metadata&&t[a].metadata.hotSpots&&t[a].metadata.hotSpots.constructor===Object&&t[a].metadata.hotSpots.hotSpots&&t[a].metadata.hotSpots.hotSpots.constructor===Object&&t[a].metadata.hotSpots.hotSpots.list&&0<t[a].metadata.hotSpots.hotSpots.list.length&&(e=t[a].metadata.hotSpots.hotSpots.list);return e},iteratePoints:function(t){if(t){var e=this.hotspots(),a=this.polygons(),n=t.points;e.removeOthers(t);for(var i=n.length-1;0<=i;i--)a.hideOthers(n[i],t),n[i].points.constructor===Array?a.create(n[i],t):e.create(n[i],t)}},assignEvents:function(t,a,n,i){if(n&&0<n.length)for(var o=n.length-1;0<=o;o--)!function(){var e=n[o];if(e.target===a)t.addEventListener(e.action,function(t){e.callback(t,i)},!1),e.initCallback&&e.initCallback(i);else if("*"===e.target){n.find(function(t){return t.target===a&&t.action===e.action})||(t.addEventListener(e.action,function(t){e.callback(t,i)},!1),e.initCallback&&e.initCallback(i))}}()},getWindowSize:function(){return document.documentElement.clientWidth},checkResizeSubscription:function(){for(var e,t=this.images,a=!1,n=this,i=t.length-1;0<=i;i--)if(t[i].breakpoints&&t[i].breakpoints.length){a=!0;break}a&&(window.onresize=function(t){clearTimeout(e),e=setTimeout(function(){n.getImgData(function(t){n.iteratePoints(t)})},350)})},init:function(){var e=this;this.getImgData(function(t){e.iteratePoints(t),e.checkResizeSubscription()})}},"object"==typeof exports&&(module.exports=POI),POI.prototype.dom={hasClass:function(t,e){return new RegExp("(\\s|^)"+e+"(\\s|$)").test(t.className)},getClosest:function(t,e){var a,n,i=e.charAt(0),o="classList"in document.documentElement;for("["===i&&(1<(a=(e=e.substr(1,e.length-2)).split("=")).length&&(n=!0,a[1]=a[1].replace(/"/g,"").replace(/'/g,"")));t&&t!==document&&1===t.nodeType;t=t.parentNode){if("."===i)if(o){if(t.classList.contains(e.substr(1)))return t}else if(new RegExp("(^|\\s)"+e.substr(1)+"(\\s|$)").test(t.className))return t;if("#"===i&&t.id===e.substr(1))return t;if("["===i&&t.hasAttribute(a[0])){if(!n)return t;if(t.getAttribute(a[0])===a[1])return t}if(t.tagName.toLowerCase()===e)return t}return null}},POI.prototype.hotspots=function(){var k=this;return{create:function(t,e){var a=e.data.hotspotCallbacks,n=document.createElement("div"),i=t.selector,o=t.target;if(i){0===i.indexOf(".")?(i=i.slice(1),n.setAttribute("class",i)):0===i.indexOf("#")?(i=i.slice(1),n.setAttribute("id",i)):n.setAttribute("class",i);var r=k.dom.getClosest(e.$img,"."+k.params.containerClass);if(n.setAttribute("data-type","poi-hotspot"),r&&k.dom.hasClass(r,k.params.containerClass)){var s,l,c=t.points.x*e.dimensions.width,d=t.points.y*e.dimensions.height,u=e.layerCanvas||e.canvas,p=e.layerCommand,m=p.tileEndW,f=p.tileEndH,g=e.changeSize;if(u){var h=u.x,y=u.y,v=u.width,b=u.height;s=100*(c-h)/v,l=100*(d-y)/b}if(g)s<=100&&l<=100&&(n.style.position="absolute",n.style.left=s+"%",n.style.top=l+"%",n.setAttribute("data-name",e.name),r.style.position="relative",r.appendChild(n));else if(!g){var w,C;w=h?100*(t.points.x*m-h)/v:100*t.points.x,C=y?100*(t.points.y*f-y)/b:100*t.points.y,w<=100&&C<=100&&(n.style.position="absolute",n.style.left=w+"%",n.style.top=C+"%",n.setAttribute("data-name",e.name),r.style.position="relative",r.appendChild(n))}o&&0<o.length&&(n.setAttribute("data-target",o),k.assignEvents(n,o,a,{$image:e.$img,$target:n,$parent:r,hotspot:t,imgInfo:e}))}else console.warn("No parent with specified className "+k.params.containerClass+" was found.")}else console.warn("no selector specified")},removeOthers:function(t){var e=k.dom.getClosest(t.$img,"."+k.params.containerClass),a=e&&e.querySelectorAll('[data-type="poi-hotspot"]');if(!a)return!1;for(var n=a.length-1;0<=n;n--)e&&e.removeChild(a[n])}}},POI.prototype.polygons=function(){var C=this;return{create:function(t,i){var e=i.data.polygonCallbacks,a=t.selector,n=document.getElementById("colorPicker"),o=n&&n.querySelector(".colorInput").getAttribute("value");if(a){var r,s=t.target,l=C.dom.getClosest(i.$img,"."+C.params.containerClass),c="http://www.w3.org/2000/svg",d=document.createElementNS(c,"g"),u=document.createElementNS(c,"polygon"),p=i.layerCanvas||i.canvas,m=i.layerCommand,f=m.tileEndW,g=m.tileEndH;if(!l)return!1;if(p)var h=p.x,y=p.y,v=p.width,b=p.height;if(i.svg?r=i.svg:((r=document.createElementNS(c,"svg")).setAttributeNS(null,"viewBox","0 0 "+(v||i.dimensions.width)+" "+(b||i.dimensions.height)),r.setAttributeNS(null,"data-name",i.name+"?"+i.data.query),l.appendChild(r),i.svg=r),0===a.indexOf(".")?(a=a.slice(1),u.setAttributeNS(null,"class",a)):0===a.indexOf("#")?(a=a.slice(1),u.setAttributeNS(null,"id",a)):u.setAttributeNS(null,"class",a),o&&u.setAttributeNS(null,"style","stroke: "+o),l&&C.dom.hasClass(l,C.params.containerClass)){var w="";t.points.forEach(function(t,e){var a=i.dimensions.width*t.x,n=i.dimensions.height*t.y;a=0<f?t.x*f-h:Math.abs(h-a),n=0<g?t.y*g-y:Math.abs(y-n),w+=a+","+n+" "}),u.setAttributeNS(null,"points",w),r.appendChild(d),d.appendChild(u),s&&0<s.length&&(u.setAttributeNS(null,"data-target",s),C.assignEvents(d,s,e,{$image:i.$img,$target:d,$parent:l,polygon:t,imgInfo:i}))}else console.warn("No parent with specified className "+C.params.containerClass+" was found.")}else console.warn("no selector specified")},hideOthers:function(t,e){var a=C.dom.getClosest(e.$img,"."+C.params.containerClass),n=a&&a.getElementsByTagName("svg");if(!n||!n.length)return!1;for(var i=n.length-1;0<=i;i--)n[i].getAttribute("data-name")===e.name+"?"+e.data.query?n[i].style.display="block":n[i].style.display="none"}}};