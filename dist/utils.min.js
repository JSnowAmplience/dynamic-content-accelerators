"use strict";!function(t){function e(t){this.initBackgroundColor(t)}function n(n){var a=[].slice.call(n.querySelectorAll(".amp-dc-promo-block")),i=2,s=window.innerWidth;if(a.length<2)a[0].classList.add("dc-fade-in");else{a.forEach(function(t){a[i-1].classList.remove("dc-fade-in")}),a[i-1].classList.add("dc-fade-in");setInterval(function(){s=window.innerWidth;var t=[].slice.call(n.querySelectorAll(".dc-fade-in"));if(!(768<s)){var e=(i===a.length?i=1:i+=1,i-1);0<t.length&&t.forEach(function(t){t.classList.remove("dc-fade-in")}),a[e].classList.add("dc-fade-in")}},5e3)}}function a(t){var e={infinite:"true"===t.getAttribute("data-infinite"),navigation:"true"===t.getAttribute("data-navigation"),autoplay:"true"===t.getAttribute("data-autoplay")},n=(window.lory?window.lory:"function"==typeof require?require("lory.js").lory:null)(t,e);e.infinite||this.disableNavButtons(t,n),e.navigation&&this.navigationDots(t,n,e),this.enableSwipeGesturesOnVideo(t)}function i(t,e){[].slice.call(document.querySelectorAll(t)).forEach(function(t){t.component||(t.component=new e(t))})}var s;function o(){var t=document.getElementById("card-container");if(!t)return!1;var e,n=t.childNodes[0].nextSibling,a=n.clientHeight,i=t.clientHeight;1.5<a/i&&(s&&clearInterval(s),s=setInterval(function(){t.classList.remove("transition"),e=n.style.top||0,e=parseInt(e),Math.abs(parseInt(e))+i<a?(e-=1,e+="px",n.style.top=e):(clearInterval(s),setTimeout(r,1e3))},10))}function r(){var t=document.getElementById("card-container"),e=t.childNodes[0].nextSibling;t.classList.add("with-transition"),setTimeout(function(){e.style.top="0px",t.classList.remove("with-transition"),t.classList.add("transition"),clearInterval(s)},1e3)}function l(){i(".amp-dc-banner",e),i(".amp-dc-promo-banner",n),i(".amp-dc-slider",a),new window.POI({domain:"http://i1.adis.ws",account:"solutions",containerClass:"amp-dc-poi-image",imgClass:"amp-dc-image-pic",images:[{name:"*",polygonCallbacks:[{target:"*",action:"click",callback:function(t,e){console.log("generic click",e)},initCallback:function(t){console.log("init callback polygon",t)}}],hotspotCallbacks:[{target:"*",action:"click",callback:function(t,e){console.log("yay, i was clicked :)",e)},initCallback:function(t){console.log("init callback hotspot",t)}},{target:"*",action:"mouseover",callback:function(t,e){console.log("yay, i was hovered :)",e)},initCallback:function(t){console.log("init callback hotspot",t)}}]}]}).init(),setTimeout(o,2e3)}e.prototype.initBackgroundColor=function(t){var e=t.querySelector(".amp-dc-banner-info"),n=e.getAttribute("data-color")||"rgb(255,255,255)",a=Number(e.getAttribute("data-opacity")||"1");n=(n=(n=n.slice(4)).slice(0,n.length-1)).split(",");var i=parseInt(n[0],10),s=parseInt(n[1],10),o=parseInt(n[2],10);e.style.backgroundColor="rgba("+i+", "+s+", "+o+", "+a+")"},a.prototype.disableNavButtons=function(t,n){var a=Array.prototype.slice.call(t.querySelectorAll(".js_dc_slide"),0),i=t.querySelector(".js_prev"),s=t.querySelector(".js_next"),o="ctrl-disabled",e=function(t){var e=n.returnIndex();0===e?(i.classList.add(o),s.classList.remove(o)):e===a.length-1?(i.classList.remove(o),s.classList.add(o)):(i.classList.remove(o),s.classList.remove(o))};0===n.returnIndex()&&i.classList.add(o),t.addEventListener("after.lory.slide",e),t.addEventListener("on.lory.resize",e)},a.prototype.autoslide=function(t,e){var n,a=function(){e.next()};return{start:function(){n=setInterval(a,3e3)},stop:function(){clearTimeout(n)},init:function(){this.start()}}},a.prototype.navigationDots=function(t,n,a){var i=Array.prototype.slice.call(t.querySelectorAll(".js_dc_slider_dot"),0),s=a.autoplay&&new this.autoslide(t,n);i.forEach(function(t,e){0===e&&(t.classList.add("active"),s&&s.init(t)),t.addEventListener("click",function(t){n.slideTo(e)})}),t.addEventListener("after.lory.slide",function(t){i.forEach(function(t,e){t.classList.remove("active")}),console.log(a);var e=a.infinite?t.detail.currentSlide-1:t.detail.currentSlide;i[e].classList.add("active"),s&&s.stop(),s&&s.start()}),t.addEventListener("on.lory.resize",function(){i.forEach(function(t,e){0===e?(t.classList.add("active"),s&&s.stop(),s&&s.start()):t.classList.remove("active")})})},a.prototype.enableSwipeGesturesOnVideo=function(t){if(navigator.userAgent.match(/Android/i)){var e=t.querySelectorAll(".amp-dc-slider .amp-dc-video");(e=Array.prototype.slice.call(e,0)).forEach(function(t,e){var n=document.createElement("div");n.style.width=t.clientWidth+"px",n.style.height=t.clientHeight-30+"px",n.style.marginBottom=30-t.clientHeight+"px",n.className="inactive-video",t.parentNode.parentNode.insertBefore(n,t.parentNode),n.addEventListener("click",function(){n.classList.add("no-overlay"),t.play()}),t.addEventListener("pause",function(){n.classList.remove("no-overlay")}),window.addEventListener("resize",function(){n.style.width=t.clientWidth+"px",n.style.height=t.clientHeight-30+"px",n.style.marginBottom=30-t.clientHeight+"px"})})}},t.Utils=t.Utils||{},t.Utils.attachComponents=l,window.addEventListener("load",function(){l()})}(window.AmpCa=window.AmpCa||{}),window.POI=function(t){this.images=[],this.imgsLoaded=0,this.params=t},window.POI.prototype={generateData:function(t,e){var n,a=this.getHotspots(t.data);if(null!==a){var i=this.findImg(t.img,e);n={dimensions:{width:t.data.width,height:t.data.height},$img:i,data:t.img,name:t.img.name,points:a,svg:null},this.images.push(n)}this.imgsLoaded+=1,t.callback(n)},getImgData:function(i){for(var s=this,o=this.params.images,r=document.querySelectorAll("img."+this.params.imgClass),l=Array.apply(null,r),c=function(a){s.ajax.atomic(s.params.domain+"/i/"+s.params.account+"/"+a.name+".json?metadata=true&func=amp.jsonReturn&v="+(new Date).getTime()).then(function(t){var e=t.data,n=s.clone(l);s.findAllImages(a,n).forEach(function(){s.generateData({data:e,img:a,callback:function(t){i(t)}},l)})})},t=0;t<o.length;t++)!function(){var n=t;if("*"===o[n].name)for(var a=0;a<r.length;a++)!function(){var e,t=r[a].getAttribute("src").split("?");if(e=(e=(e=t[0].split(s.params.account+"/"))[e.length-1].split("/"))[0],o.find(function(t){return t.name===e}))return;c({name:e,hotspotCallbacks:o[n].hotspotCallbacks,polygonCallbacks:o[n].polygonCallbacks})}();else o[n].data?s.generateData({data:o[n].data,img:o[n],callback:function(t){i(t)}},l):c(o[n])}()},findAllImages:function(t,e){for(var n=this.params.imgAttribute||"src",a=[],i=0;i<e.length;i++){var s=new RegExp(t.name),o=e[i].getAttribute(n).match(s);o&&0<o.length&&a.push(e[i])}return a},findImg:function(t,e){for(var n=this.params.imgAttribute||"src",a=null,i=0;i<e.length;i++){var s=new RegExp(t.name),o=e[i].getAttribute(n).match(s);if(o&&0<o.length){a=e[i],e.splice(i,1);break}}return a},getHotspots:function(t){var e=null;t.constructor!==Array&&(t=[t]);for(var n=0;n<t.length;n++)t[n]&&t[n].metadata&&t[n].metadata.hotSpots&&t[n].metadata.hotSpots.constructor===Object&&t[n].metadata.hotSpots.hotSpots&&t[n].metadata.hotSpots.hotSpots.constructor===Object&&t[n].metadata.hotSpots.hotSpots.list&&0<t[n].metadata.hotSpots.hotSpots.list.length&&(e=t[n].metadata.hotSpots.hotSpots.list);return e},iteratePoints:function(t){if(t)for(var e=this.hotspots(),n=this.polygons(),a=t.points,i=0;i<a.length;i++)a[i].points.constructor===Array?n.create(a[i],t):e.create(a[i],t)},assignEvents:function(t,n,a,i){if(a&&0<a.length)for(var s=0;s<a.length;s++)!function(){var e=a[s];e.target!==n&&"*"!==e.target||(t.addEventListener(e.action,function(t){e.callback(t,i)},!1),e.initCallback&&e.initCallback(i))}()},init:function(){var e=this;this.getImgData(function(t){e.iteratePoints(t)})},clone:function(t){if(null==t||"object"!=typeof t)return t;var e=t.constructor();for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}},"object"==typeof exports&&(module.exports=POI),POI.prototype.dom={hasClass:function(t,e){return new RegExp("(\\s|^)"+e+"(\\s|$)").test(t.className)},getClosest:function(t,e){var n,a,i=e.charAt(0),s="classList"in document.documentElement;for("["===i&&(1<(n=(e=e.substr(1,e.length-2)).split("=")).length&&(a=!0,n[1]=n[1].replace(/"/g,"").replace(/'/g,"")));t&&t!==document&&1===t.nodeType;t=t.parentNode){if("."===i)if(s){if(t.classList.contains(e.substr(1)))return t}else if(new RegExp("(^|\\s)"+e.substr(1)+"(\\s|$)").test(t.className))return t;if("#"===i&&t.id===e.substr(1))return t;if("["===i&&t.hasAttribute(n[0])){if(!a)return t;if(t.getAttribute(n[0])===n[1])return t}if(t.tagName.toLowerCase()===e)return t}return null}},POI.prototype.hotspots=function(){var c=this;return{create:function(t,e){var n=e.data.hotspotCallbacks,a=document.createElement("div"),i=t.selector,s=t.target;if(i){0===i.indexOf(".")?(i=i.slice(1),a.setAttribute("class",i)):0===i.indexOf("#")?(i=i.slice(1),a.setAttribute("id",i)):a.setAttribute("class",i),a.setAttribute("data-type","poi-hotspot");var o=c.dom.getClosest(e.$img,"."+c.params.containerClass);if(o&&c.dom.hasClass(o,c.params.containerClass)){var r=t.points.x.toString().slice(2);r=r.substr(0,2)+"."+r.substr(2);var l=t.points.y.toString().slice(2);l=l.substr(0,2)+"."+l.substr(2),a.style.position="absolute",a.style.left=r+"%",a.style.top=l+"%",o.style.position="relative",o.appendChild(a),s&&0<s.length&&(a.setAttribute("data-target",s),c.assignEvents(a,s,n,{$image:e.$img,$target:a,$parent:o,hotspot:t,imgInfo:e}))}else console.warn("No parent with specified className "+c.params.containerClass+" was found.")}else console.warn("no selector specified")}}},POI.prototype.polygons=function(){var d=this;return{create:function(t,e){var n=e.data.polygonCallbacks,a=t.selector;if(a){var i,s=t.target,o=d.dom.getClosest(e.$img,"."+d.params.containerClass),r="http://www.w3.org/2000/svg",l=document.createElementNS(r,"g"),c=document.createElementNS(r,"polygon");if(e.svg?i=e.svg:((i=document.createElementNS(r,"svg")).setAttributeNS(null,"viewBox","0 0 "+e.dimensions.width+" "+e.dimensions.height),o.appendChild(i),e.svg=i),0===a.indexOf(".")?(a=a.slice(1),c.setAttributeNS(null,"class",a)):0===a.indexOf("#")?(a=a.slice(1),c.setAttributeNS(null,"id",a)):c.setAttributeNS(null,"class",a),o&&d.dom.hasClass(o,d.params.containerClass)){var u="";t.points.forEach(function(t){u+=e.dimensions.width*t.x+","+e.dimensions.height*t.y+" "}),c.setAttributeNS(null,"points",u),i.appendChild(l),l.appendChild(c),s&&0<s.length&&(c.setAttributeNS(null,"data-target",s),d.assignEvents(l,s,n,{$image:e.$img,$target:l,$parent:o,polygon:t,imgInfo:e}))}else console.warn("No parent with specified className "+d.params.containerClass+" was found.")}else console.warn("no selector specified")}}},POI.prototype.ajax={settings:null,defaults:{method:"GET",username:null,password:null,data:{},headers:{"Content-type":"application/x-www-form-urlencoded"},responseType:"text",timeout:null,withCredentials:!1},supports:function(){return"XMLHttpRequest"in window&&"JSON"in window&&"Promise"in window},extend:function(){for(var n=this,a={},t=0;t<arguments.length;t++){!function(t){for(var e in t)t.hasOwnProperty(e)&&("[object Object]"===Object.prototype.toString.call(t[e])?a[e]=n.extend(a[e],t[e]):a[e]=t[e])}(arguments[t])}return a},parse:function(e){var n;if("text"!==this.settings.responseType&&""!==this.settings.responseType)return{data:e.response,xhr:e};try{n=JSON.parse(e.responseText)}catch(t){n=e.responseText}return{data:n,xhr:e}},param:function(t){if("string"==typeof t||"[object FormData]"===Object.prototype.toString.call(t))return t;if(/application\/json/i.test(this.settings.headers["Content-type"])||"[object Array]"===Object.prototype.toString.call(t))return JSON.stringify(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")},makeRequest:function(a){var i=new XMLHttpRequest,s=this,t=new Promise(function(t,e){for(var n in i.onreadystatechange=function(){4===i.readyState&&(200<=i.status&&i.status<300?t(s.parse(i)):e({status:i.status,statusText:i.statusText,responseText:i.responseText}))},i.open(s.settings.method,a,!0,s.settings.username,s.settings.password),i.responseType=s.settings.responseType,s.settings.headers)s.settings.headers.hasOwnProperty(n)&&i.setRequestHeader(n,s.settings.headers[n]);s.settings.timeout&&(i.timeout=s.settings.timeout,i.ontimeout=function(t){e({status:408,statusText:"Request timeout"})}),s.settings.withCredentials&&(i.withCredentials=!0),i.send(s.param(s.settings.data))});return t.cancel=function(){i.abort()},t},atomic:function(t,e){if(!this.supports())throw"Atomic: This browser does not support the methods used in this plugin.";return this.settings=this.extend(this.defaults,e||{}),this.makeRequest(t)}};